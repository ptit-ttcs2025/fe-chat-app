<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Friend Request Test - PTIT Chat</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <h1>🚀 PTIT Chat - Friend Request WebSocket Test</h1>

    <!-- Login Section -->
    <div class="login-section">
        <h3>🔑 Đăng Nhập</h3>
        <div class="login-form">
            <div class="form-group">
                <label for="email-input">Email:</label>
                <input type="email" id="email-input" placeholder="user@example.com">
            </div>
            <div class="form-group">
                <label for="password-input">Password:</label>
                <input type="password" id="password-input" placeholder="password">
            </div>
            <button id="login-btn" class="login-btn">Đăng Nhập</button>
            <button id="logout-btn" class="logout-btn" style="display: none;">Đăng Xuất</button>
        </div>
        <div class="current-user">
            <span>Đang đăng nhập: </span>
            <span id="current-user-display">Chưa đăng nhập</span>
            <span id="connection-status" class="status offline">Offline</span>
        </div>
    </div>

    <!-- Quick Login Buttons -->
    <div class="quick-login-section">
        <h3>⚡ Đăng Nhập Nhanh (Test Users)</h3>
        <div class="quick-login-buttons">
            <button class="quick-login-btn" data-email="cong" data-password="123456">
                👤 Công
            </button>
            <button class="quick-login-btn" data-email="test-ws" data-password="123456">
                👤 Test WS
            </button>
        </div>
    </div>

    <!-- Friend Request Form -->
    <div class="request-section">
        <h3>📨 Gửi Lời Mời Kết Bạn</h3>
        <div class="form-group">
            <label for="receiver-id">ID người nhận:</label>
            <input type="text" id="receiver-id" placeholder="User ID của người bạn muốn kết bạn">
        </div>
        <div class="form-group">
            <label for="friend-message">Tin nhắn (tuỳ chọn):</label>
            <input type="text" id="friend-message" placeholder="Xin chào! Kết bạn với mình nhé!" maxlength="200" value="Xin chào! Kết bạn với mình nhé!">
        </div>
        <button id="send-request-btn" class="send-btn" disabled>Gửi Lời Mời</button>
    </div>

    <!-- User Search Section -->
    <div class="search-section">
        <h3>🔍 Tìm Người Dùng</h3>
        <div class="form-group">
            <input type="text" id="search-input" placeholder="Tìm theo tên hoặc email...">
            <button id="search-btn" class="search-btn">Tìm Kiếm</button>
        </div>
        <div id="search-results" class="search-results"></div>
    </div>

    <!-- Notifications Panel -->
    <div class="notifications-section">
        <h3>🔔 Thông Báo Real-time</h3>
        <div class="notification-counter">
            Số thông báo chưa đọc: <span id="unread-count">0</span>
        </div>
        <div id="notifications-container" class="notifications-container">
            <div class="no-notifications">Chưa có thông báo nào</div>
        </div>
    </div>

    <!-- Friend Requests Management -->
    <div class="requests-section">
        <h3>📋 Quản Lý Lời Mời</h3>
        <div class="request-tabs">
            <button id="received-tab" class="tab-btn active">Đã Nhận</button>
            <button id="sent-tab" class="tab-btn">Đã Gửi</button>
        </div>
        <div id="requests-container" class="requests-container">
            <div class="no-requests">Không có lời mời nào</div>
        </div>
    </div>

    <!-- Friends List -->
    <div class="friends-section">
        <h3>👥 Danh Sách Bạn Bè</h3>
        <div id="friends-container" class="friends-container">
            <div class="no-friends">Chưa có bạn bè nào</div>
        </div>
    </div>

    <!-- Actions Panel -->
    <div class="actions-section">
        <h3>⚡ Thao Tác</h3>
        <div class="action-buttons">
            <button id="load-requests-btn" class="action-btn">📥 Load Lời Mời</button>
            <button id="load-friends-btn" class="action-btn">👥 Load Bạn Bè</button>
            <button id="load-notifications-btn" class="action-btn">🔔 Load Thông Báo</button>
            <button id="clear-notifications" class="action-btn">🗑️ Xóa Thông Báo</button>
            <button id="test-connection" class="action-btn">🔗 Test Connection</button>
        </div>
    </div>

    <!-- Debug Panel -->
    <div class="debug-section">
        <h3>🐛 Debug Panel</h3>
        <div id="debug-log" class="debug-log"></div>
        <button id="clear-log" class="clear-log-btn">Clear Log</button>
    </div>
</div>

<!-- Include SockJS và STOMP -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script src="script.js"></script>
</body>
</html>